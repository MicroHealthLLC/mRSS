<%= form_for(user, url: change_basic_info_user_path(user), html: { method: :put, class: 'form-horizontal', id: 'smart-form-register' }) do |f| %>

    <fieldset>
      <legend></legend>

      <% unless user.is_doctor? %>
          <div class="form-group">
            <label class="col-md-2 control-label">Dépôt</label>
            <div class="col-md-9">
              <%= f.select :depot_id, options_for_select(Depot.active.pluck(:name, :id), selected: f.object.depot.try(:id)), {}, {class: 'form-control'} %>
            </div>
          </div>
      <% end %>
      <div class="form-group">
        <label class="col-md-2 control-label">Email</label>
        <div class="col-md-9">
          <%= f.email_field :email, placeholder: 'Email' , class: 'form-control' %>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label">Administrator</label>
        <div class="col-md-9">
          <%= f.check_box :admin %>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label">Role</label>
        <div class="col-md-9">
          <%= f.select :role_id, options_for_select(Role.active.map{|r| [r.name, r.id]}.insert(0, ['']), selected: f.object.role.try(:id)), {}, {class: 'form-control'} %>
        </div>
      </div>


      <div class="form-group">
        <label class="col-md-2 control-label">Statut</label>
        <div class="col-md-9">
          <%= f.select :state, options_for_select([['Active', true],['Inactive', false]], selected: user.state), {}, {class: 'form-control'} %>
        </div>
      </div>


      <div class="form-group" >
        <div class="col-md-11">
          <%= f.submit "Update", class: 'btn btn-success pull-right' %>
        </div>
      </div>
    </fieldset>
<% end %>
<script>
    // Validation
    $(function() {
        runAllForms();
        // Validation
        $("#smart-form-register").validate({

            // Rules for form validation
            rules : {
                "user[login]" : {
                    required : true
                },
                "user[email]" : {
                    required : true
                }
            },
            // Do not change code below
            errorPlacement : function(error, element) {
                error.insertAfter(element.parent());
            }
        });

    });
</script>
